"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const EventEmitter=require("eventemitter3");class Subscription extends EventEmitter{constructor(e,t={}){super(),this.perform=(e,t={})=>{t.action=e,this.send(t)},this.send=e=>{this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},this.unsubscribe=()=>{this.consumer.subscriptions.remove(this)},this.connected=()=>{this.emit("connected")},this.disconnected=()=>{this.emit("disconnected")},this.rejected=()=>{this.emit("rejected")},this.error=e=>{this.emit("error",e)},this.received=(e={})=>{e.action=null!=e.action?e.action:"received",this.emit(e.action,e)},this.consumer=e,this.identifier=JSON.stringify(t)}}exports.default=Subscription;