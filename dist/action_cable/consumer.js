"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Connection=require("./connection").default,Subscriptions=require("./subscriptions").default;class Consumer{constructor(e,t,n,s={}){this.send=e=>{this.connection.send(e)},this.connect=()=>{this.connection.open()},this.disconnect=()=>{this.connection.close({allowReconnect:!1})},this.ensureActiveConnection=()=>{this.connection.isActive()||this.connection.open()},this._url=e,this._headers=s,this.log=t,this.WebSocket=n,this.subscriptions=new Subscriptions(this),this.connection=new Connection(this,t,n)}get url(){return this.createWebSocketURL(this._url)}get headers(){return this.createHeaders(this._headers)}createWebSocketURL(e){const t="function"==typeof e?e():e;return t&&!/^wss?:/i.test(t)?t.replace("http","ws"):t}createHeaders(e){return"function"==typeof e?e():e}}exports.default=Consumer;