var ActionCable,Consumer;Consumer=require("./consumer").default,ActionCable={INTERNAL:require("./internal"),WebSocket:"undefined"!=typeof window&&window.WebSocket?window.WebSocket:"undefined"!=typeof global&&global.WebSocket?global.WebSocket:WebSocket,logger:"undefined"!=typeof window&&window.console?window.console:"undefined"!=typeof global&&global.console?global.console:console,createConsumer:function(e,n={}){return new Consumer(e,this.log,this.WebSocket,n)},getOrCreateConsumer:function(e,n={}){var o,t,i;return o=this._createCacheKey(e,n),(null!=(i=this._consumers[o])?i.connection.isActive():void 0)?(this.log("Reusing existing consumer for",e),this._consumers[o]):(this._consumers[o]&&!this._consumers[o].connection.isActive()&&(this.log("Cleaning up disconnected consumer for",e),this._consumers[o].disconnect(),delete this._consumers[o]),this.log("Creating new consumer for",e),t=new Consumer(e,this.log,this.WebSocket,n),this._consumers[o]=t,t)},disconnectConsumer:function(e,n={}){var o;return o=this._createCacheKey(e,n),!!this._consumers[o]&&(this._consumers[o].disconnect(),delete this._consumers[o],this.log("Disconnected consumer for",e),!0)},_createCacheKey:function(e,n){return`${"function"==typeof e?e():e}|${JSON.stringify("function"==typeof n?n():n)}`},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(...e){if(ActionCable.debugging)return e.push(Date.now()),ActionCable.logger.log("[ActionCable]",...e)}};export default ActionCable;