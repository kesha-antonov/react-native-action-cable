var ActionCable,Consumer;Consumer=require("./consumer").default,ActionCable={INTERNAL:require("./internal"),WebSocket:window.WebSocket,logger:window.console,_consumers:{},createConsumer:function(e,n={}){return new Consumer(e,this.log,this.WebSocket,n)},getOrCreateConsumer:function(e,n={}){var t,o,s;return t=this._createCacheKey(e,n),(null!=(s=this._consumers[t])?s.connection.isActive():void 0)?(this.log("Reusing existing consumer for",e),this._consumers[t]):(this._consumers[t]&&!this._consumers[t].connection.isActive()&&(this.log("Cleaning up disconnected consumer for",e),this._consumers[t].disconnect(),delete this._consumers[t]),this.log("Creating new consumer for",e),o=new Consumer(e,this.log,this.WebSocket,n),this._consumers[t]=o,o)},disconnectConsumer:function(e,n={}){var t;return t=this._createCacheKey(e,n),!!this._consumers[t]&&(this._consumers[t].disconnect(),delete this._consumers[t],this.log("Disconnected consumer for",e),!0)},_createCacheKey:function(e,n){return`${"function"==typeof e?e():e}|${JSON.stringify("function"==typeof n?n():n)}`},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(...e){if(ActionCable.debugging)return e.push(Date.now()),ActionCable.logger.log("[ActionCable]",...e)}};export default ActionCable;